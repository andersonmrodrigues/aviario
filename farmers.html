<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro de Integrados</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Análises</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Inicio</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Cadastros
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="user.html">Usuários</a></li>
                <li><a class="dropdown-item" href="causes.html">Tipo de Causa</a></li>
                <li><a class="dropdown-item" href="shed.html">Galpões</a></li>
                <li><a class="dropdown-item" href="farmers.html">Integrados</a></li>
                <li><a class="dropdown-item" href="analysis.html">Análises</a></li>
                <li><a class="dropdown-item" href="planning.html">Planejamento</a></li>
                <li><a class="dropdown-item" href="catch.html">Equipe de Apanho</a></li>
                <li><a class="dropdown-item" href="config.html">Configuração</a></li>
              </ul>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="dif.html">DIF</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="inspection.html">Inspeção</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="result.html">Resultados</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-5">
      <h1 class="text-center">Cadastro de Integrados</h1>
      <button
        type="button"
        class="btn btn-primary mb-3"
        data-bs-toggle="modal"
        data-bs-target="#creatorModal"
      >
        Adicionar Criador
      </button>
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nome Fantasia</th>
            <th scope="col">Razão Social</th>
            <th scope="col">CNPJ/CPF</th>
            <th scope="col">Cidade</th>
            <th scope="col">Estado</th>
            <th scope="col">País</th>
            <th scope="col">Bairro</th>
            <th scope="col">Ações</th>
          </tr>
        </thead>
        <tbody id="creatorList">
          <tr>
            <td>1</td>
            <td>Criador A</td>
            <td>Razão Social A</td>
            <td>00.000.000/0001-00</td>
            <td>São Paulo</td>
            <td>SP</td>
            <td>Brasil</td>
            <td>Zona Sul</td>
            <td>
              <button
                type="button"
                class="btn btn-primary btn-sm"
                data-bs-toggle="modal"
                data-bs-target="#creatorModal"
                onclick="editCreator(0)"
              >
                Editar
              </button>
              <button
                type="button"
                class="btn btn-danger btn-sm"
                onclick="removeCreator(0)"
              >
                Remover
              </button>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>Criador B</td>
            <td>Razão Social B</td>
            <td>00.000.000/0002-00</td>
            <td>Rio de Janeiro</td>
            <td>RJ</td>
            <td>Brasil</td>
            <td>Zona Sul</td>
            <td>
              <button
                type="button"
                class="btn btn-primary btn-sm"
                data-bs-toggle="modal"
                data-bs-target="#creatorModal"
                onclick="editCreator(1)"
              >
                Editar
              </button>
              <button
                type="button"
                class="btn btn-danger btn-sm"
                onclick="removeCreator(1)"
              >
                Remover
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Modal de Cadastro de Integrados -->
    <div
      class="modal fade"
      id="creatorModal"
      tabindex="-1"
      aria-labelledby="creatorModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="creatorModalLabel">
              Adicionar Criador
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="creatorForm">
              <div class="mb-3">
                <label for="fantasyName" class="form-label"
                  >Nome Fantasia</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="fantasyName"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="socialReason" class="form-label"
                  >Razão Social</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="socialReason"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="cnpj" class="form-label">CNPJ/CPF</label>
                <input type="text" class="form-control" id="cnpj" required />
              </div>
              <div class="mb-3">
                <label for="city" class="form-label">Cidade</label>
                <input type="text" class="form-control" id="city" required />
              </div>
              <div class="mb-3">
                <label for="state" class="form-label">Estado</label>
                <input type="text" class="form-control" id="state" required />
              </div>
              <div class="mb-3">
                <label for="country" class="form-label">País</label>
                <input type="text" class="form-control" id="country" required />
              </div>
              <div class="mb-3">
                <label for="neighbourhood">Bairro</label>
                <input type="text" class="form-control" id="neighbourhood" required />
              </div>
              <div class="mb-3">
                <label for="description" class="form-label">Descrição</label>
                <textarea class="form-control" id="description"></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Fechar
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="saveCreator()"
            >
              Salvar Criador
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
      let creators = [
        {
          fantasyName: "Criador A",
          socialReason: "Razão Social A",
          cnpj: "00.000.000/0001-00",
          city: "São Paulo",
          state: "SP",
          country: "Brasil",
          neighbourhood: "Zona Sul",
          description: "Descrição do Criador A",
        },
        {
          fantasyName: "Criador B",
          socialReason: "Razão Social B",
          cnpj: "00.000.000/0002-00",
          city: "Rio de Janeiro",
          state: "RJ",
          country: "Brasil",
          neighbourhood: "Zona Sul",
          description: "Descrição do Criador B",
        },
      ];

      function saveCreator() {
        const fantasyName = document.getElementById("fantasyName").value;
        const socialReason = document.getElementById("socialReason").value;
        const cnpj = document.getElementById("cnpj").value;
        const city = document.getElementById("city").value;
        const state = document.getElementById("state").value;
        const country = document.getElementById("country").value;
        const description = document.getElementById("description").value;

        creators.push({
          fantasyName,
          socialReason,
          cnpj,
          city,
          state,
          country,
          description,
        });
        updateCreatorTable();
        const creatorModal = bootstrap.Modal.getInstance(
          document.getElementById("creatorModal")
        );
        creatorModal.hide();
        document.getElementById("creatorForm").reset();
      }

      function updateCreatorTable() {
        const creatorList = document.getElementById("creatorList");
        creatorList.innerHTML = "";

        creators.forEach((creator, index) => {
          creatorList.innerHTML += `
          <tr>
            <td>${index + 1}</td>
            <td>${creator.fantasyName}</td>
            <td>${creator.socialReason}</td>
            <td>${creator.cnpj}</td>
            <td>${creator.city}</td>
            <td>${creator.state}</td>
            <td>${creator.country}</td>
            <td>
              <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#creatorModal" onclick="editCreator(${index})">Editar</button>
              <button type="button" class="btn btn-danger btn-sm" onclick="removeCreator(${index})">Remover</button>
            </td>
          </tr>
        `;
        });
      }

      function editCreator(index) {
        const creator = creators[index];
        document.getElementById("fantasyName").value = creator.fantasyName;
        document.getElementById("socialReason").value = creator.socialReason;
        document.getElementById("cnpj").value = creator.cnpj;
        document.getElementById("city").value = creator.city;
        document.getElementById("state").value = creator.state;
        document.getElementById("country").value = creator.country;
        document.getElementById("description").value = creator.description;

        const creatorModal = new bootstrap.Modal(
          document.getElementById("creatorModal")
        );
        creatorModal.show();

        creators.splice(index, 1);
      }

      function removeCreator(index) {
        creators.splice(index, 1);
        updateCreatorTable();
      }

      document.addEventListener("DOMContentLoaded", () => {
        updateCreatorTable();
      });
    </script>
  </body>
</html>
